(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function l(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(t){if(t.ep)return;t.ep=!0;const o=l(t);fetch(t.href,o)}})();let v=document.querySelector(".search__btn"),u=document.querySelector(".search__bar"),i=document.querySelector(".error"),a=document.querySelectorAll(".display__box__content"),b=a[0],_=a[1],T=a[2],O=a[3],C="at_3nSy6EZiCcBkZ5rBdDMw7YiMzRyFv",p={fetchIP:function(e){fetch(`https://geo.ipify.org/api/v1?apiKey=${C}&ipAddress=${e}`).then(r=>r.json()).then(r=>{y(r)}).catch(r=>{console.log("ip address Error:"),u.style.borderColor="red",i.style.opacity="1",i.textContent="Input a valid Ip address"})},fetchDomain:function(e){fetch(`https://geo.ipify.org/api/v2/country,city?apiKey=at_qDn7PObRzAXY7gKk7qy9LuX9OgThO&domain=${e}`).then(r=>r.json()).then(r=>y(r)).catch(r=>{console.log("domain error"),u.style.borderColor="red",i.style.opacity="1",i.textContent="Input a valid domain name"})},search:function(){let e=document.querySelector(".search__bar__input");e.value!==""&&(/\d/.test(e.value)?(console.log("ip address"),this.fetchIP(e.value),setTimeout(()=>{e.value=""},300)):(console.log("domain"),this.fetchDomain(e.value),setTimeout(()=>{e.value=""},300)))}};function y(e){//! ------------------------- API DATA -------------------------------------
let{ip:r}=e,{timezone:l,city:c,country:t,postalCode:o,lat:n,lng:s}=e.location,{isp:m}=e;//! ------------------------- TEXT REPLACEMENT WITH API DATA -----------------------------
_.innerHTML=`${c}, ${t} ${o}`,b.innerHTML=r,T.innerHTML=`UTC ${l}`,O.innerHTML=m;//! -------------------------- FORM VALIDATION -------------------------
u.style.borderColor="white",i.style.opacity="0";//! ------------------------ LEAFLET LIBRARY ------------------------------
var f=L.DomUtil.get("map");f!=null&&(f._leaflet_id=null);var d=L.map("map").setView([n,s],13);L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(d);var h=L.marker([n,s]).addTo(d);h.bindPopup("<b>Your Location</b>");var g=L.circle([n,s],{color:"#5d81eb",fillColor:"#4658a8",fillOpacity:.5,radius:500}).addTo(d);g.bindPopup("<b>Your Location Area</b>")}v.addEventListener("click",()=>{p.search()});document.addEventListener("keydown",e=>{e.key==="Enter"&&p.search()});document.addEventListener("DOMContentLoaded",function(){p.fetchIP("")});
